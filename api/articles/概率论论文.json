{"title":"","uid":"f73a8e23e6f6f669cf99c7dba8fa0722","slug":"概率论论文","date":"2022-02-03T12:49:05.194Z","updated":"2022-02-03T10:54:47.829Z","comments":true,"path":"api/articles/概率论论文.json","keywords":null,"cover":[],"content":"<p>#《原神》祈愿机制概率研究</p>\n<p>【摘要】本文以概率论、随机过程理论等工具研究游戏《原神》中的祈愿机制，主要基于动态规划，以“期望”和“概率的概率”两大分析方向进行数据处理，并根据分析结果总结了一些方便玩家规划金钱与资源的建议。由于追求多次获得五星道具的玩家基本“不差钱”，本文附有获取少量五星情况下的数据可视化。</p>\n<p>[TOC]</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>Version:20220105</p>\n<ul>\n<li>修了讲一遍时找到的笔误</li>\n</ul></blockquote>\n<h2 id=\"规则表述\"><a href=\"#规则表述\" class=\"headerlink\" title=\"规则表述\"></a>规则表述</h2><p>旅行者（玩家）可以通过祈愿机制获取“五星角色”“五星武器“”四星角色“”四星武器“来提高战斗力。其中，角色具有命之座机制，首次获得为0命，最高6命，命座数越高，角色越强；类似地，武器拥有精炼层数机制，首次获得为1阶，最高5阶。</p>\n<p>最近的版本更新中，《原神》的祈愿机制也发生了一定的变化。</p>\n<p>以下是《原神》两个祈愿机制的官方描述（<a href=\"https://ys.mihoyo.com/main/news/public%EF%BC%89%EF%BC%9A\">https://ys.mihoyo.com/main/news/public）：</a></p>\n<h3 id=\"角色祈愿\"><a href=\"#角色祈愿\" class=\"headerlink\" title=\"角色祈愿\"></a>角色祈愿</h3><p>**五星角色祈愿的基础概率为0.600%，综合概率（含保底）为1.600%**，最多90次祈愿必定能通过保底获取5星角色。</p>\n<p>当祈愿获取到5星角色时，有50.000%的概率为本期5星UP角色「A1」<em>（小保底）</em>。如果本次祈愿获取的5星角色非本期5星UP角色，下次祈愿获取的5星角色必定为本期5星UP角色<em>（大保底）</em>。</p>\n<p><strong>4星物品祈愿的基础概率为5.100%，4星角色祈愿的基础概率为2.550%，4星武器祈愿的基础概率为2.550%，4星物品祈愿的综合概率（含保底）为13.000%。</strong>最多10次祈愿必定能通过保底获取4星或以上物品，通过保底获取4星物品的概率为99.400%，获取5星物品的概率为0.600%。</p>\n<p>当祈愿获取到4星物品时，有50.000%的概率为本期4星UP角色「B」、「C」、「D」中的一个。如果本次祈愿获取的4星物品非本期4星UP角色，下次祈愿获取的4星物品必定为本期4星UP角色。当祈愿获取到4星UP物品时，每个本期4星UP角色的获取概率均等。</p>\n<p>角色祈愿包括「角色活动祈愿-1」和「角色活动祈愿-2」，祈愿次数和保底完全共享，共同累计。二者区别仅在于当期UP的五星角色不同。</p>\n<h3 id=\"武器祈愿\"><a href=\"#武器祈愿\" class=\"headerlink\" title=\"武器祈愿\"></a>武器祈愿</h3><p><strong>武器祈愿中，5星武器祈愿的基础概率为0.700%，综合概率（含保底）为1.850%，</strong>最多80次祈愿必定能通过保底获取5星武器。</p>\n<p>当祈愿获取到5星武器时，有75.000%的概率为本期5星UP武器「M」、「N」中的一个。如果本次祈愿获取的5星武器非本期5星UP武器，下次祈愿获取的5星武器必定为本期5星UP武器。</p>\n<p>【定轨机制】命定值：玩家可以指定一把本期5星UP武器（定轨）。当获取到的5星武器为非当前定轨武器时，获得1点命定值，命定值达到满值2后，在本祈愿中获得的下一把5星武器必定为当前定轨武器。获取到当前定轨武器时，无论当前命定值是否达到满值，都将会重置为0，重新累计。在未通过命定值达到满值获取定轨武器的情况下，当祈愿获取到5星UP物品时，每把本期5星UP武器的获取概率均等。</p>\n<p>未使用「神铸定轨」定轨武器时，将不会累积命定值。</p>\n<p><strong>4星物品祈愿的基础概率为6.000%，4星角色祈愿的基础概率为3.000%，4星武器祈愿的基础概率为3.000%，4星物品祈愿的综合概率（含保底）为14.500%。</strong>最多10次祈愿必定能通过保底获取4星或以上物品，通过保底获取4星物品的概率为99.300%，获取5星物品的概率为0.700%。</p>\n<p>当祈愿获取到4星物品时，有75.000%的概率为本期4星UP武器「F」、「G」、「H」、「J」、「K」中的一个。如果本次祈愿获取的4星物品非本期4星UP武器，下次祈愿获取的4星物品必定为本期4星UP武器。当祈愿获取到4星UP物品时，每把本期4星UP武器的获取概率均等。</p>\n<h1 id=\"角色祈愿分析\"><a href=\"#角色祈愿分析\" class=\"headerlink\" title=\"角色祈愿分析\"></a>角色祈愿分析</h1><h2 id=\"五星角色概率建模\"><a href=\"#五星角色概率建模\" class=\"headerlink\" title=\"五星角色概率建模\"></a>五星角色概率建模</h2><p>   前面的作业中，笔者通过运行代码和期望分析，对角色祈愿的机制进行了尝试1的模拟，简单回顾如下：</p>\n<h3 id=\"尝试1：89次伯努利实验\"><a href=\"#尝试1：89次伯努利实验\" class=\"headerlink\" title=\"尝试1：89次伯努利实验\"></a>尝试1：89次伯努利实验</h3><p>建模1：前89次祈愿，每次获得五星角色的概率均为0.6%，若前89次实验没有获得五星角色，则获取五星角色的概率为100%。</p>\n<p>则可以建模二项分布概率密度：</p>\n<p>$$ PDF(X &#x3D; k) &#x3D; (1-p)^{k-1}p(p &#x3D; 0.6 %)$$</p>\n<p>$$ CDF(X &#x3D; k) &#x3D; (1 - p)^k$$</p>\n<p>计算每次获取五星角色的祈愿数期望：</p>\n<p>$$ E(X) &#x3D; 90(1-CDF(89)) + \\sum_{i&#x3D;1}^{89}iPDF(x&#x3D;i)$$</p>\n<p>得到综合概率：</p>\n<p>$$P &#x3D; \\frac{1}{E(X)} $$</p>\n<p>结果为：1.435%。（详见week9作业）</p>\n<p>与官方描述不符。实际上，官方提到的0.6%是基础概率，说明不是恒定概率的伯努利实验，于是提出模型2.</p>\n<h3 id=\"尝试2：概率递增的保底机制\"><a href=\"#尝试2：概率递增的保底机制\" class=\"headerlink\" title=\"尝试2：概率递增的保底机制\"></a>尝试2：概率递增的保底机制</h3><p>建模2：在一定抽数都没有得到五星角色后，获得五星角色概率开始线性上升，直到第90抽达到100%。 </p>\n<p>由于具体概率密度没有官方文档，只能站在前人的分析上，根据结合数据统计的开源项目（<a href=\"https://github.com/OneBST/GGanalysis%EF%BC%8C%E6%9C%AC%E6%96%87%E5%AE%9E%E9%99%85%E4%B8%8A%E7%9B%B8%E5%BD%93%E4%BA%8E%E6%A8%A1%E5%9E%8B%E7%9A%84%E5%A4%8D%E7%8E%B0%EF%BC%89%E9%87%87%E7%94%A8%E7%9A%84%E6%A8%A1%E5%9E%8B%EF%BC%8C%E7%AC%ACx%E6%AC%A1%E7%A5%88%E6%84%BF%E8%8E%B7%E5%BE%97%E4%BA%94%E6%98%9F%E8%A7%92%E8%89%B2%E7%9A%84%E6%A6%82%E7%8E%87%E5%A6%82%E4%B8%8B%EF%BC%9A\">https://github.com/OneBST/GGanalysis，本文实际上相当于模型的复现）采用的模型，第x次祈愿获得五星角色的概率如下：</a></p>\n<p>$$ P(x) &#x3D; \\begin{cases} 0.6% &amp;{x&lt;&#x3D;73}\\ 0.6% + 6%(x - 73) &amp;{74&lt;&#x3D;x&lt;&#x3D;89}\\1&amp;{x &#x3D; 90} \\end{cases}$$</p>\n<p>由此，可以得到第x次祈愿得到五星角色的分布列（类似于几何分布）：</p>\n<p>$$ PDF(x) &#x3D; P(x) * \\prod_{k &#x3D; 1}^{x - 1}1-P(x) $$</p>\n<p>$$ PDF(x) &#x3D; \\begin{cases} (1 - 0.6%)^{x-1}\\times0.6% &amp;{x\\leqslant73}\\ (1-0.6%)^{73} \\times \\sum_{k &#x3D; 74}^{x} (1- 6%(k - 73))^{k-73}(6%(k-73)) &amp;{74\\leqslant x\\leqslant89}\\(1-0.6%)^{73} \\times \\sum_{k &#x3D; 74}^{89} (1- 6%(k - 73))^{k-73}&amp;{x &#x3D; 90} \\end{cases} $$</p>\n<p><strong>该模型平均获取五星角色的祈愿次数为62.3。</strong>该模型下五星角色的综合概率为1.605%。</p>\n<p>注：期望计算公式：</p>\n<p>$$ E(X) &#x3D; \\sum_{i&#x3D;1}^{x}PDF(x)\\times x $$</p>\n<h2 id=\"概率递增保底机制下的数字特征\"><a href=\"#概率递增保底机制下的数字特征\" class=\"headerlink\" title=\"概率递增保底机制下的数字特征\"></a>概率递增保底机制下的数字特征</h2><h3 id=\"求数据特征\"><a href=\"#求数据特征\" class=\"headerlink\" title=\"求数据特征\"></a>求数据特征</h3><p>在这里处理一个认识误区：期望 !&#x3D; 概率为50%的点（中分位点）。</p>\n<p>也就是说，期望作为概率的平均值，$ CDF(EX) &#x3D; 0.5 $ <strong>是不成立的</strong>。 注意到这一前提，才能比较正确地理解下面的结论。</p>\n<p>由于其概率密度并不是均匀分布的，差别较大，选择平均数似乎不太合适。所以我们获取中分位点。根本不应该是程序员能写出来的粗糙代码验证：</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">import numpy as np\nimport matplotlib as mlp\nimport matplotlib.pyplot as plt\nfrom matplotlib.pyplot import MultipleLocator\ndef p_5(n):\n    if n &lt; 73:\n        return 0.006\n    elif n &lt; 89:\n        return 0.006 + (n - 72) * 0.06\n    else:\n        return 1\n    \npdf_5 &#x3D; [];\ncdf_5 &#x3D; [];\ntmp &#x3D; 0.0;\n\nfor i in range (0,90):\n    tmp &#x3D; p_5(i);\n    for j in range(0,i):\n        tmp &#x3D; tmp * (1 - p_5(j))\n    pdf_5.append(tmp);\n#注：下文中其他代码可能要用到p_5,p_4函数,pdf_5列表哦\n\nfor i in range (0,90):\n    tmp &#x3D; 0.0;\n    for j in range (0,i+1):\n        tmp &#x3D; tmp + pdf_5[j];\n    cdf_5.append(tmp);\n    print(i+1,cdf_5[i])\n# out:\n#75 0.4739047630777248\n#76 0.571758477145268</code></pre>\n\n<p>该模型的概率密度函数（蓝线）和分布函数（黄线）图：</p>\n<p><img src=\"http://img.070077.xyz/%E5%8E%9F%E7%A5%9E%E6%8A%BD%E5%8D%A1%E6%A6%82%E7%8E%87%E5%88%86%E5%B8%83%E5%9B%BE.png\" alt=\"img\"></p>\n<p>我们不妨乐观一点，中分位点：75.</p>\n<p>注：最概然祈愿次数为77。也就是说，在第77次祈愿获取五星角色的概率最高。</p>\n<p>每次获得五星角色，需要的祈愿次数记为$N$. 则：</p>\n<ul>\n<li>从期望角度考虑，N &#x3D; 62.3.</li>\n<li>从中分位点角度考虑，N &#x3D; 75.</li>\n</ul>\n<p>实际理解为：需要75次祈愿，才能使获得5星角色的发生概率达到50%（实际：46.8%）。</p>\n<p>这种分布具有较强的右偏性。上面分析过，这两个数字特征具有不同的分析意义，可以理解为：</p>\n<ul>\n<li>祈愿623次，期望获得10个五星角色。（期望值）</li>\n<li>祈愿75次，能使获得五星角色的概率达到50%。</li>\n</ul>\n<h3 id=\"由期望特征进行资源规划\"><a href=\"#由期望特征进行资源规划\" class=\"headerlink\" title=\"由期望特征进行资源规划\"></a>由期望特征进行资源规划</h3><p>回到规则中，解决以下问题：</p>\n<h4 id=\"获得五星角色A的期望次数分析\"><a href=\"#获得五星角色A的期望次数分析\" class=\"headerlink\" title=\"获得五星角色A的期望次数分析\"></a>获得五星角色A的期望次数分析</h4><p>对于期望分析：注意到，对于获取当期UP五星角色，最多需要2次获得五星角色。也就是说，有50%的概率，仅需要获取一次五星角色；有50%的概率，需要获取2次五星角色。也就是说，需要获得五星角色的次数：</p>\n<p>$$ 1 \\times 50% + 2 \\times 50%  &#x3D; 1.5 $$</p>\n<p>对于“获取五星角色”而言，多次获取（不论是否为当期UP角色）之间互相独立，因此需要的祈愿次数为$1.5 \\times 62.3 &#x3D; 93.45$ 次。</p>\n<h4 id=\"获得6命座A角色的期望次数分析\"><a href=\"#获得6命座A角色的期望次数分析\" class=\"headerlink\" title=\"获得6命座A角色的期望次数分析\"></a>获得6命座A角色的期望次数分析</h4><p>注意到，对于“获取五星角色”而言，多次获取（不论是否为当期UP角色）之间互相独立。考虑这个问题：对于“获取A角色”事件之间，是相互独立的吗？</p>\n<p>从期望角度考虑，可以说：是的。参考上面的思路，只需要“获取A角色”发生7次即可。因此需要的祈愿次数为 $1.5N \\times 7 &#x3D; 10.5N$ 也就是 654.15 次。</p>\n<h4 id=\"获得四星角色B的期望次数分析\"><a href=\"#获得四星角色B的期望次数分析\" class=\"headerlink\" title=\"获得四星角色B的期望次数分析\"></a>获得四星角色B的期望次数分析</h4><p>由于涉及“基础概率”，我们沿用上一开源项目模型的概率递增保底机制结论：</p>\n<ul>\n<li><p>从第9次祈愿处开始上升。</p>\n</li>\n<li><p>获得五星角色并不会重置四星保底。</p>\n</li>\n</ul>\n<p>第x次祈愿获得四星角色的概率如下：</p>\n<p>$$ P(x) &#x3D; \\begin{cases} 5.1% &amp; {x\\leqslant8}\\ 56.1% &amp;{x &#x3D; 9}\\1&amp;{x &#x3D; 10} \\end{cases}$$</p>\n<p>$$ PDF(x) &#x3D; P(x) * \\prod_{k &#x3D; 1}^{x - 1}1-P(x)  &#x3D; \\begin{cases} (1 - 5.1%)^{x-1}\\times5.1% &amp; {x\\leqslant8}\\ (1-5.1%)^8\\times56.1% &amp;{x&#x3D;9}\\(1-5.1%)^8\\times43.9%&amp;{x &#x3D; 10} \\end{cases}$$ </p>\n<p>期望值：</p>\n<p>$$ E(X) &#x3D; \\sum_{i&#x3D;1}^{x}PDF(x)\\times x &#x3D; 7.66$$ </p>\n<p>综合概率：13.05%.</p>\n<p>对于期望分析：注意到，对于获取当期UP五星角色，仅有$\\frac{1}{3}$的概率得到当期UP的四星角色中的B，且每次获得当期四星角色时，有50%的概率，仅需要获取一次四星角色；有50%的概率，需要获取2次四星角色。也就是说，获得角色B的次数期望为$1.5 \\times 3 \\times E(X) &#x3D; 34.5$ 。</p>\n<h3 id=\"由分位点特征进行分析\"><a href=\"#由分位点特征进行分析\" class=\"headerlink\" title=\"由分位点特征进行分析\"></a>由分位点特征进行分析</h3><p>从“概率的概率”角度分析便没有期望分析那么简单了。中位点与期望的乘积并不能得到叠加事件的中位点。基本上大部分分而治之的想法均不满足独立性要求。我们需要寻找更一般的数学模型：</p>\n<h4 id=\"获得多次五星角色的分位点分析\"><a href=\"#获得多次五星角色的分位点分析\" class=\"headerlink\" title=\"获得多次五星角色的分位点分析\"></a>获得多次五星角色的分位点分析</h4><p>接下来，由于<strong>使获得两次五星角色的概率达到50%的祈愿次数不等于获得一次五星角色祈愿次数的中位点的2倍</strong>，我们需要计算分布的<strong>叠加</strong>。</p>\n<p>我们从简单问题入手（自己编的）：</p>\n<p>(1) 一直抛硬币，直到总共出现2次正面朝上，求期望的抛硬币次数——显然是4.</p>\n<p>(2) 需要抛多少次硬币，使【至少出现2次正面朝上】的概率达到50%。</p>\n<p>(3) 需要抛多少次骰子，使【至少出现2次点数1】的概率达到50%。</p>\n<p>题目（2）（3）这类问题，可以转化成“几何分布的叠加问题”。这里的概率稳定<del>比较简单</del>，还可以参阅负二项分布有关资料。</p>\n<p>而对于的祈愿的建模，概率不稳定，有三种可能的思考方向：一可以用模拟动态规划处理，二是对各种情况进行全概率公式展开（<del>工作量极大</del>），三是离散信号的进行卷积运算:$P(Z&#x3D;X+Y&#x3D;z) &#x3D; \\sum_1^\\infty PDF(X&#x3D;z-y)P(X&#x3D;y)$</p>\n<p>笔者采用第三种方法。</p>\n<p>各位修改一下代码的变量，即可获取想要的值。</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">c5_need &#x3D; 2#需要抽出几次五星角色；\nc5_poss &#x3D; 0.25#想知道的概率;\nconv &#x3D; pdf_5;\nfor cnt in range(0,c5_need - 1):\n    conv&#x3D;np.convolve(conv,pdf_5,&#39;full&#39;)\n    plt.plot(conv)\n    tmp &#x3D; 0.0\n    for i in range (0,len(conv)):\n        tmp +&#x3D; conv[i]\n        if(cnt &#x3D;&#x3D; c5_need - 2 and tmp &gt;&#x3D; c5_poss):\n            print(i+c5_need);\n            break\n    #DEMO\n    #135 -- 需要祈愿135次，才有50%的概率获得两个五星角色。\n\t#祈愿154次，有75%的概率获得两个五星角色。</code></pre>\n\n<p>我对获得两次的情况列了个分布图：</p>\n<p><img src=\"http://img.070077.xyz/%E5%8E%9F%E7%A5%9E%E6%8A%BD%E5%8D%A12%E6%AC%A1%E4%BA%94%E6%98%9F%E6%A6%82%E7%8E%87%E5%88%86%E5%B8%83%E5%9B%BE.png\" alt=\"原神抽卡2次五星概率分布图\"></p>\n<h4 id=\"双角色池祈愿\"><a href=\"#双角色池祈愿\" class=\"headerlink\" title=\"双角色池祈愿\"></a>双角色池祈愿</h4><p>这个其实没什么太大的变化，把A2等价成A1，就可以和上文的A的结论统一了。</p>\n<h2 id=\"保底依赖下的分位点分析\"><a href=\"#保底依赖下的分位点分析\" class=\"headerlink\" title=\"保底依赖下的分位点分析\"></a>保底依赖下的分位点分析</h2><h3 id=\"尝试1：将“保底获得的五星”和“祈愿次数”拆成两个独立事件\"><a href=\"#尝试1：将“保底获得的五星”和“祈愿次数”拆成两个独立事件\" class=\"headerlink\" title=\"尝试1：将“保底获得的五星”和“祈愿次数”拆成两个独立事件\"></a>尝试1：将“保底获得的五星”和“祈愿次数”拆成两个独立事件</h3><h4 id=\"保底之间的马尔可夫过程\"><a href=\"#保底之间的马尔可夫过程\" class=\"headerlink\" title=\"保底之间的马尔可夫过程\"></a>保底之间的马尔可夫过程</h4><p>由于角色祈愿机制满足：本次获取五星角色是否为A的概率仅取决于上次获取的五星角色是否为A。符合马尔可夫过程（状态$i$只取决于上一次状态$i-1$，与再先前的状态相互独立。参：课本P321）的建模标准，可以做出以下状态图和概率转移矩阵：</p>\n<pre class=\"line-numbers language-mermaid\" data-language=\"mermaid\"><code class=\"language-mermaid\">graph LR\nA --1&#x2F;2--&gt; !A\n!A --1--&gt; A\nA --1&#x2F;2--&gt; A</code></pre>\n<p>$$ M &#x3D; \\space \\begin{matrix}  &amp; A &amp; !A\\A &amp; {1}\\over{2} &amp; {1}\\over{2}\\!A &amp; 1 &amp; 0\\end{matrix}$$</p>\n<p>马尔可夫链在三门问题、经济学分析、自然语言处理等领域具有广泛的应用，在极值环境下具有平稳分布的特点。以下进行模拟分析。</p>\n<p>收敛的综合概率：$M^\\infty$。经过计算，可知A物品的综合概率为$\\frac{2}{3}$ 。这个计算结果可以理解为：任意一次获得五星角色，有$\\frac{2}{3}$的概率是A.（初始状况：刚获得A，以说明存在小保底）</p>\n<p>而对于中间情况的分析，可对应转换为矩阵的乘法和加法运算。</p>\n<p>但是我们很难把两个独立事件的概率组合到一起，以达到50%，请看下面的分析。</p>\n<h4 id=\"分类讨论的方式求取概率\"><a href=\"#分类讨论的方式求取概率\" class=\"headerlink\" title=\"分类讨论的方式求取概率\"></a>分类讨论的方式求取概率</h4><p>我们以抽到零命为例，对应的状态矩阵为$M$。因为初始状态（你可以理解为-1命）为A，此时可以理解为对应的概率为：$p_{11}P(获得一次五星) +p_{12}(获得二次五星)$，其中获得两次五星的概率模型可参考上面的卷积公式（由于二次五星也比较简单，大可自己分类讨论写）,如：</p>\n<p>$$ \\frac{1}{2}PDF(X) + \\frac{1}{2}PDF(Z)$$（注：x&gt;90的部分，记为0即可，因为那部分情况已结束。）</p>\n<p>验证这一方法的正确性：</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">tmp &#x3D; 0.0\nfor i in range(0,179):\n    if(i&lt;90): tmp +&#x3D; 0.5 * pdf_5[i];\n    tmp+&#x3D;0.5*conv[i];\n    if(tmp&gt;&#x3D;0.5):\n        print(i);\n        break;\n&#x2F;&#x2F;沿用上方的数组了，输出为79.\n因为列表下标是从0开始计数的，79 &lt; 90 ，所以对应：80次祈愿可使抽到UP五星的概率达到50%。</code></pre>\n\n<p>如果需要制图，可以使用以下的画图模板代码</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">#制图代码\nx_major_locator&#x3D;MultipleLocator(4)#x分度值设置\ny_major_locator&#x3D;MultipleLocator(0.1)\nax&#x3D;plt.gca()\nax.xaxis.set_major_locator(x_major_locator)\nax.yaxis.set_major_locator(y_major_locator)\nplt.grid()  # 生成网格\nx_values &#x3D; [x for x in range(1, 91)]\ny_values &#x3D; [pdf_5[x] for x in range(0, 90)]\nplt.plot(x_values,y_values)</code></pre>\n\n<p>如果是多命，则需要更复杂的分类讨论。如：一命的情况，就需要二次转移矩阵$M^2$的各项作为转移概率了，包括(A A ， A !A A ， !A A A ， !A A !A A)四种状态对应的状态转移概率，以及多次的卷积结果。由于前面代码没有记忆，就不尝试了。</p>\n<h3 id=\"尝试2：动态规划的角度\"><a href=\"#尝试2：动态规划的角度\" class=\"headerlink\" title=\"尝试2：动态规划的角度\"></a>尝试2：动态规划的角度</h3><h4 id=\"抽到多个五星角色中UP五星角色的个数概率\"><a href=\"#抽到多个五星角色中UP五星角色的个数概率\" class=\"headerlink\" title=\"抽到多个五星角色中UP五星角色的个数概率\"></a>抽到多个五星角色中UP五星角色的个数概率</h4><p>其实上面的转移矩阵比较简单，直接可以写出状态转移方程，考虑动态规划。</p>\n<p>定义状态$dp[i][j][1]$表示第 $i$ 次获得的五星角色时得到当期UP角色A后，共获得了$j$次A角色，达到$j-1$命 （第一次获得A角色达到0命）；类似地，$dp[i][j][0]$ 表示第 $i$ 次获得的五星角色不是A。</p>\n<p>则状态转移方程：</p>\n<p>$$ dp[i][j][0] &#x3D; \\frac{1}{2}dp[i-1][j][1] $$</p>\n<p>$$ dp[i][j][1] &#x3D; \\frac{1}{2}dp[i-1][j-1][1] + dp[i-1][j-1][0]$$</p>\n<p>起点：$dp[0][0][1] &#x3D; 1$</p>\n<p>由此可以记$dp[i][j]$为第$i$次获得五星角色后共获得$j$次（及以上）A角色的概率，则：</p>\n<p>$$ dp[i][j] &#x3D; \\sum_{k&#x3D;j}^{i}dp[i][k][1]+dp[i][k][0] $$</p>\n<p>尝试构造含$i,j,dp[i][j]$三个变量的图：<img src=\"http://img.070077.xyz/%E5%8E%9F%E7%A5%9E%E5%91%BD%E5%BA%A7%E6%8A%BD%E6%95%B0%E6%A6%82%E7%8E%87%E5%88%86%E5%B8%83%E5%9B%BE.png\"></p>\n<p>由图中可以估计获取1~7次A角色时，使概率达到50%时，横坐标即为需要获得A角色的次数。（x，y）表示，已获得x次五星角色的情况下，y为对应的总共获取次数大于等于对应i的概率。</p>\n<h4 id=\"求取命座-祈愿次数概率\"><a href=\"#求取命座-祈愿次数概率\" class=\"headerlink\" title=\"求取命座-祈愿次数概率\"></a>求取命座-祈愿次数概率</h4><p>定义：$ dp[i][j][k] $ ：第j次祈愿的结果对应k，并第i次获得A角色的概率，则状态转移方程：</p>\n<ul>\n<li>大保底状态：上次五星!A，这次必获得A；</li>\n<li>小保底状态：上次五星是A（初始状态），这次只有50%的概率获得A。</li>\n<li>k &#x3D; 0 ： 获得五星角色A</li>\n<li>k &#x3D; 1 ： 获得五星角色且!A</li>\n</ul>\n<p>（临时变量：tmp：上次获得五星的祈愿次数）</p>\n<ul>\n<li>注意：要明确状态转移的结果“from to”。循环遍历时，由j逐步+k确定后续值并进行迭代赋值，会导致一个点的值多次计入概率，所以最后取概率只需要取[0]</li>\n</ul>\n<p>$$ dp[i][j][0] &#x3D; dp[i-1][tmp][1] * PDF(j-tmp) + dp[i-1][tmp][0] * \\frac{1}{2} * PDF(j-tmp)$$</p>\n<p>$$ dp[i][j][1] &#x3D; dp[i][tmp][0] * \\frac{1}{2} * PDF(j-tmp)$$</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">n5_cnt&#x3D;1;#要抽出多少次A\nn5_tries&#x3D;180;#准备的祈愿次数\ntmp &#x3D; 0;\ndp_p &#x3D; np.zeros((13, 180*n5_cnt+90,2), dtype&#x3D;float);\ndp_p[0][0][0] &#x3D; 1\nfor i in range (0,n5_cnt+1):\n        for j in range (0,n5_tries):\n            for k in range (1,91):\n                if(i-1&gt;&#x3D;0):\n                    dp_p[i][j+k][0] +&#x3D; dp_p[i-1][j][1] * pdf_5[k-1] + dp_p[i-1][j][0] * 0.5 * pdf_5[k-1];\n                dp_p[i][j+k][1] +&#x3D; dp_p[i][j][0] * 0.5 * pdf_5[k-1]\nposs&#x3D;[]\nfor i in range(0,n5_tries):\n    tmp &#x3D; tmp + dp_p[n5_cnt][i][0]\n    poss.append(tmp)\nprint(tmp)\nplt.plot(poss)\n#DEMO:0.4762677010731945</code></pre>\n\n<p> 与上面的卷积验证是一致的。</p>\n<p>0命概率图：<img src=\"http://img.070077.xyz/%E5%8E%9F%E7%A5%9E%E6%8A%BD%E5%8D%A12%E6%AC%A1%E4%BA%94%E6%98%9F%E6%A6%82%E7%8E%87%E5%88%86%E5%B8%83%E5%9B%BE.1png.png\" alt=\"原神抽卡2次五星概率分布图.1png\"></p>\n<h4 id=\"非默认状态开始的动态规划（To-Be-Continued…）\"><a href=\"#非默认状态开始的动态规划（To-Be-Continued…）\" class=\"headerlink\" title=\"非默认状态开始的动态规划（To Be Continued…）\"></a>非默认状态开始的动态规划（To Be Continued…）</h4><p>如果开始状态为大保底状态，或已经有一定的祈愿次数呢？以后再写。</p>\n<h2 id=\"四星角色祈愿分析\"><a href=\"#四星角色祈愿分析\" class=\"headerlink\" title=\"四星角色祈愿分析\"></a>四星角色祈愿分析</h2><p>预设：获取到五星时，不会重置四星角色的保底。且，以下策略，如果出了五星角色，先笑一笑，算法就当没祈愿哈~</p>\n<h3 id=\"概览\"><a href=\"#概览\" class=\"headerlink\" title=\"概览\"></a>概览</h3><p>四星的分析只需要将上面的p_5相关改成p_4即可，在此省略不表，给出一定结论：<img src=\"http://img.070077.xyz/%E5%8E%9F%E7%A5%9E%E5%9B%9B%E6%98%9F%E8%A7%92%E8%89%B2pdfcdf.png\" alt=\"原神四星角色pdfcdf\"></p>\n<p>0命图：<img src=\"http://img.070077.xyz/%E5%8E%9F%E7%A5%9E4%E6%98%9F0%E5%91%BD%E6%8A%BD%E6%95%B0%E6%A6%82%E7%8E%87%E5%88%86%E5%B8%83%E5%9B%BE.png\" alt=\"原神4星0命抽数概率分布图\"></p>\n<h3 id=\"算法\"><a href=\"#算法\" class=\"headerlink\" title=\"算法\"></a>算法</h3><p>定义：$ dp[i][j][k] $ ：第j次祈愿的结果对应k，并第i次获得B角色的概率，则状态转移方程：</p>\n<ul>\n<li>保底状态：上次四星!UP，这次必获得UP角色</li>\n<li>k &#x3D; 0 ： 获得想要的四星角色B</li>\n<li>k &#x3D; 1 ： 获得UP四星角色但不是B</li>\n<li>k &#x3D; 2：获得非UP四星角色</li>\n</ul>\n<p>（临时变量：tmp：上次获得四星的祈愿次数）</p>\n<p>$$ dp[i][j][0] &#x3D; dp[i-1][tmp][1] * PDF(j-tmp) * \\frac{1}{6} \\+ dp[i-1][tmp][0] * \\frac{1}{6} * PDF(j-tmp) \\+ dp[i-1][tmp][1] * PDF(j-tmp) * \\frac{1}{3}$$</p>\n<p>$$ dp[i][j][1] &#x3D; dp[i][tmp][0] * \\frac{1}{3} * PDF(j-tmp) \\+ dp[i][tmp][1] * PDF(j-tmp) * \\frac{1}{3} \\+  dp[i][tmp][2] * \\frac{2}{3} * PDF(j-tmp)$$</p>\n<p>$$ dp[i][j][2] &#x3D; dp[i][tmp][0] * \\frac{1}{2} * PDF(j-tmp) + dp[i][tmp][1] * \\frac{1}{2} * PDF(j-tmp)$$</p>\n<p>任意代码：（原理与下方“无定轨机制武器祈愿”类似，这里人比较懒，直接对p_5移花接木了）</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">#每抽概率\n#这是研究四星的，但是为了偷懒，捏：\ndef p_5(n):\n    if n &lt; 8:\n        return 0.051;\n    elif n &lt; 9:\n        return 0.561;\n    else:\n        return 1;\n        \npdf_5 &#x3D; [];\ncdf_5 &#x3D; [];\ntmp &#x3D; 0.0;\n\nfor i in range (0,10):\n    tmp &#x3D; p_5(i);\n    for j in range(0,i):\n        tmp &#x3D; tmp * (1 - p_5(j))\n    pdf_5.append(tmp);\n\nfor i in range (0,10):\n    tmp &#x3D; 0.0;\n    for j in range (0,i+1):\n        tmp &#x3D; tmp + pdf_5[j];\n    cdf_5.append(tmp);\n    print(i+1,cdf_5[i])\n \nn5_cnt&#x3D;1#要抽出多少次B\nn5_tries&#x3D;130 * n5_cnt;#准备的祈愿次数\ntmp &#x3D; 0;\ndp_p &#x3D; np.zeros((13, 150*n5_cnt + 20,3), dtype&#x3D;float);\ndp_p[0][0][0] &#x3D; 1\n# 0 - B 1 - UP &amp; !B 2- !UP\nfor i in range (0,n5_cnt+1):\n        for j in range (0,n5_tries):\n            for k in range (1,11):\n                if(i-1&gt;&#x3D;0):\n                    dp_p[i][j+k][0] +&#x3D; dp_p[i-1][j][2] * pdf_5[k-1] * 1&#x2F;3\\\n                                    + dp_p[i-1][j][1] * pdf_5[k-1] * 1&#x2F;6 + dp_p[i-1][j][0] * 1&#x2F;6 * pdf_5[k-1];\n                dp_p[i][j+k][1] +&#x3D; dp_p[i][j][0] * 1&#x2F;3 * pdf_5[k-1] + dp_p[i][j][2] * 2&#x2F;3 * pdf_5[k-1]\\\n                                + dp_p[i][j][1] * 1&#x2F;3 * pdf_5[k-1];\n                dp_p[i][j+k][2] +&#x3D; dp_p[i][j][0] * 1&#x2F;2 * pdf_5[k-1] + dp_p[i][j][1] * 1&#x2F;2 * pdf_5[k-1];\nposs&#x3D;[]\nfor i in range(0,n5_tries):\n    tmp &#x3D; tmp + dp_p[n5_cnt][i][0]\n    poss.append(tmp)\nprint(tmp)\n#制图代码，直接cv用\nx_major_locator&#x3D;MultipleLocator(10)#x分度值设置\ny_major_locator&#x3D;MultipleLocator(0.1)\nax&#x3D;plt.gca()\nax.xaxis.set_major_locator(x_major_locator)\nax.yaxis.set_major_locator(y_major_locator)\nx_values &#x3D; [x for x in range(1, n5_tries)]\nplt.grid()  # 生成网格\nplt.plot(poss)  </code></pre>\n\n\n\n<h2 id=\"不同模型对比研究\"><a href=\"#不同模型对比研究\" class=\"headerlink\" title=\"不同模型对比研究\"></a>不同模型对比研究</h2><h3 id=\"与无保底机制（均匀1-6-）的对比\"><a href=\"#与无保底机制（均匀1-6-）的对比\" class=\"headerlink\" title=\"与无保底机制（均匀1.6%）的对比\"></a>与无保底机制（均匀1.6%）的对比</h3><p>​    修改</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">def p_5(n):\n\treturn 0.016;</code></pre>\n\n<p>期望：不变；</p>\n<p>分位点图：<img src=\"http://img.070077.xyz/%E5%9D%87%E5%8C%801.6%E5%8E%9F%E7%A5%9E%E6%8A%BD%E5%8D%A1%E6%A6%82%E7%8E%87%E5%88%86%E5%B8%83%E5%9B%BE.png\" alt=\"均匀1.6原神抽卡概率分布图\"></p>\n<p>极端情况上升了~</p>\n<p>两次五星分布图：<img src=\"http://img.070077.xyz/%E5%9D%87%E5%8C%801.6%E5%8E%9F%E7%A5%9E%E6%8A%BD%E5%8D%A12%E6%AC%A1%E4%BA%94%E6%98%9F%E6%A6%82%E7%8E%87%E5%88%86%E5%B8%83%E5%9B%BE.png\" alt=\"均匀1.6原神抽卡2次五星概率分布图\"></p>\n<p>一命概率分布图：<img src=\"http://img.070077.xyz/%E5%9D%87%E5%8C%801.6%E5%8E%9F%E7%A5%9E%E6%8A%BD%E5%8D%A1%E4%B8%80%E5%91%BD%E6%A6%82%E7%8E%87%E5%88%86%E5%B8%83%E5%9B%BE.png\" alt=\"均匀1.6原神抽卡一命概率分布图\"></p>\n<p>可以发现，均匀和非均匀，有利有弊吧。</p>\n<h3 id=\"与保底前均匀机制（魔改尝试1）的对比\"><a href=\"#与保底前均匀机制（魔改尝试1）的对比\" class=\"headerlink\" title=\"与保底前均匀机制（魔改尝试1）的对比\"></a>与保底前均匀机制（魔改尝试1）的对比</h3><p>用我比较熟悉的c++建模以下（其实更精确的值为0.88%）</p>\n<p>$$  P(x) &#x3D; \\begin{cases} 0.9% &amp;{x\\leqslant 89}\\1&amp;{x &#x3D; 90} \\end{cases} $$</p>\n<p>期望：62.06（综合概率：1.61%）</p>\n<p>分位点分布图：</p>\n<p><img src=\"http://img.070077.xyz/%E9%AD%94%E6%94%B91.6%E5%8E%9F%E7%A5%9E%E6%8A%BD%E5%8D%A1%E6%A6%82%E7%8E%87%E5%88%86%E5%B8%83%E5%9B%BE.png\" alt=\"魔改1.6原神抽卡概率分布图\"></p>\n<p>两次五星分布图：<img src=\"http://img.070077.xyz/%E9%AD%94%E6%94%B91.6%E5%8E%9F%E7%A5%9E%E6%8A%BD%E5%8D%A12%E6%AC%A1%E4%BA%94%E6%98%9F%E6%A6%82%E7%8E%87%E5%88%86%E5%B8%83%E5%9B%BE.png\" alt=\"魔改1.6原神抽卡2次五星概率分布图\"></p>\n<p>一命概率分布图：<img src=\"http://img.070077.xyz/%E9%AD%94%E6%94%B91.6%E5%8E%9F%E7%A5%9E%E6%8A%BD%E5%8D%A1%E4%B8%80%E5%91%BD%E6%A6%82%E7%8E%87%E5%88%86%E5%B8%83%E5%9B%BE.png\" alt=\"魔改1.6原神抽卡一命概率分布图\"></p>\n<p>会让更多人吃保底~</p>\n<h1 id=\"武器祈愿分析\"><a href=\"#武器祈愿分析\" class=\"headerlink\" title=\"武器祈愿分析\"></a>武器祈愿分析</h1><h2 id=\"概率递增保底机制及数字特征\"><a href=\"#概率递增保底机制及数字特征\" class=\"headerlink\" title=\"概率递增保底机制及数字特征\"></a>概率递增保底机制及数字特征</h2><p>武器祈愿的机制和角色祈愿大体一致。算法参上，在此直接给出结论。</p>\n<p>五星武器概率：</p>\n<p>$$P(x) &#x3D; \\begin{cases}0.7% &amp; x\\leqslant62\\0.7%+7%(x-62) &amp; 63\\leqslant x \\leqslant 71\\ 63.7% + 3.5%(x-71) &amp; 72\\leqslant x \\leqslant 79 \\ 1 &amp; x&#x3D;80\\end{cases}$$ </p>\n<p>数学期望：54.25.</p>\n<p>综合概率：1.88%</p>\n<p>分布图：<img src=\"http://img.070077.xyz/%E5%8E%9F%E7%A5%9E%E6%AD%A6%E5%99%A8%E6%8A%BD%E5%8D%A1%E6%A6%82%E7%8E%87%E5%88%86%E5%B8%83%E5%9B%BE.png\" alt=\"原神武器抽卡概率分布图\"></p>\n<p>四星武器概率</p>\n<p>$$P(x) &#x3D; \\begin{cases}6% &amp; x\\leqslant 7\\66% &amp; x &#x3D; 8 \\ 96% &amp; x &#x3D; 9 \\ 1 &amp; x&#x3D;10\\end{cases}$$</p>\n<p>数学期望：6.74.</p>\n<p>综合概率：14.84%。</p>\n<p>你会发现，分成了四段，复杂了一点。</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">#每抽概率\ndef p_5(n):\n    if n &lt; 62:\n        return 0.007;\n    elif n &lt; 71:\n        return 0.007 + (n - 62) * 0.07;\n    elif n &lt; 79:\n        return 0.637 + (n - 71) * 0.035;\n    else:\n        return 1.0;\ndef p_4(n):\n    if n &lt; 7:\n        return 0.06\n    elif n &lt; 8:\n        return 0.66\n    elif n &lt; 9:\n        return 0.96;\n    else:\n        return 1;\npdf_5 &#x3D; [];#第x+1抽出概率\ncdf_5 &#x3D; [];\ntmp &#x3D; 0.0;\n\nfor i in range (0,80):\n    tmp &#x3D; p_5(i);\n    for j in range(0,i):\n        tmp &#x3D; tmp * (1.0 - p_5(j))\n    pdf_5.append(tmp);\n\nfor i in range (0,80):\n    tmp &#x3D; 0.0;\n    for j in range (0,i+1):\n        tmp &#x3D; tmp + pdf_5[j];\n    cdf_5.append(tmp);\n    print(i+1,cdf_5[i])</code></pre>\n\n\n\n<h2 id=\"定轨机制下的资源规划（假设定轨M）\"><a href=\"#定轨机制下的资源规划（假设定轨M）\" class=\"headerlink\" title=\"定轨机制下的资源规划（假设定轨M）\"></a>定轨机制下的资源规划（假设定轨M）</h2><h3 id=\"获取五星武器M的祈愿次数分析\"><a href=\"#获取五星武器M的祈愿次数分析\" class=\"headerlink\" title=\"获取五星武器M的祈愿次数分析\"></a>获取五星武器M的祈愿次数分析</h3><p>由于命定值机制，马尔可夫过程比较复杂。于是考虑动态规划：</p>\n<p>定义$dp[i][j][k]$为第j次祈愿时第i次获得五星武器M，祈愿后k：</p>\n<ul>\n<li>k &#x3D; 0 : 命定值为0。表示抽到了M.</li>\n<li>k &#x3D; 1：命定值为1且抽到了N.</li>\n<li>k &#x3D; 2：命定值为1且抽到的是非UP武器。</li>\n<li>k &#x3D; 3：命定值为2，抽出来的不是M，具体是啥在本小节中不相关。</li>\n</ul>\n<p>$$ dp[i][j][0] &#x3D; dp[i-1][tmp][0] * \\frac{3}{8} *PDF(j-tmp) \\+ dp[i-1][tmp][1] * \\frac{3}{8} * PDF(j-tmp) \\+ dp[i-1][tmp][2] * \\frac{1}{2}*PDF(j-tmp) \\+ dp[i-1][tmp][3] *PDF(j-tmp)$$</p>\n<p>$$ dp[i][j][1] &#x3D; dp[i][tmp][0] <em>\\frac{1}{4}</em> PDF(j-tmp)$$</p>\n<p>$$ dp[i][j][2] &#x3D; dp[i][tmp][0] <em>\\frac{3}{8}</em> PDF(j-tmp)$$</p>\n<p>$$ dp[i][j][3] &#x3D; dp[i][tmp][1] * ( \\frac{3}{8} + \\frac{1}{4}) *PDF(j-tmp) \\ + dp[i][tmp][2] * \\frac{1}{2} * PDF(j-tmp)$$</p>\n<p>运行代码：</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">n5_cnt&#x3D;2;#要抽出多少次M\nn5_tries&#x3D; 207;#准备的祈愿次数\ntmp &#x3D; 0;\ndp_p &#x3D; np.zeros((13, 330*n5_cnt,5), dtype&#x3D;float);\ndp_p[0][0][0] &#x3D; 1\nfor i in range (0,n5_cnt+1):\n        for j in range (0,n5_tries + n5_cnt + 1):\n            for k in range (1,81):\n                if(i-1&gt;&#x3D;0):\n                    dp_p[i][j+k][0] +&#x3D; dp_p[i-1][j][0] * pdf_5[k-1] * 0.375\\\n                                + dp_p[i-1][j][1] * 0.375 * pdf_5[k-1] \\\n                                + dp_p[i-1][j][2] * 0.5 * pdf_5[k-1]\\\n                                + dp_p[i-1][j][3] * pdf_5[k-1];\n                dp_p[i][j+k][1] +&#x3D; dp_p[i][j][0] * 0.25 * pdf_5[k-1];\n                dp_p[i][j+k][2] +&#x3D; dp_p[i][j][0] * 0.375 * pdf_5[k-1];\n                dp_p[i][j+k][3] +&#x3D; dp_p[i][j][1] * 0.625 * pdf_5[k-1]\\\n                                + dp_p[i][j][2] * 0.5 * pdf_5[k-1];\nposs&#x3D;[]\nfor i in range(0,n5_tries):\n    tmp &#x3D; tmp + dp_p[n5_cnt][i][0]\n    poss.append(tmp)\nprint(tmp)\nplt.plot(poss)\n#0.49317051582855165</code></pre>\n\n<p>进行99次祈愿后，获得M的概率达到50%。以下是获取一次武器M的概率分布图：</p>\n<p><img src=\"http://img.070077.xyz/%E5%8E%9F%E7%A5%9E%E6%AD%A6%E5%99%A8m%E6%8A%BD%E5%8D%A1%E6%A6%82%E7%8E%87%E5%88%86%E5%B8%83%E5%9B%BE.png\" alt=\"原神武器m抽卡概率分布图\"></p>\n<h3 id=\"获取五星武器N的祈愿次数分析\"><a href=\"#获取五星武器N的祈愿次数分析\" class=\"headerlink\" title=\"获取五星武器N的祈愿次数分析\"></a>获取五星武器N的祈愿次数分析</h3><p>问题：我定轨了M，反而想获取五星武器N…（反向定轨）</p>\n<p>定义$dp[i][j][k]$为第j次祈愿时第i次获得五星武器N，祈愿后k：</p>\n<ul>\n<li>k &#x3D; 0 : 命定值为0。表示抽到了M.</li>\n<li>k &#x3D; 1：命定值为1且抽到了N.</li>\n<li>k &#x3D; 2：命定值为1且抽到的是非UP武器。</li>\n<li>k &#x3D; 3：命定值为2，且抽到了N.</li>\n<li>k &#x3D; 4：命定值为2，且抽到的是非UP武器。</li>\n</ul>\n<p>$$ dp[i][j][0] &#x3D; dp[i][tmp][0] * \\frac{3}{8} *PDF(j-tmp) \\ + dp[i][tmp][1] * \\frac{3}{8} * PDF(j-tmp) \\+ dp[i][tmp][2] * \\frac{1}{2}*PDF(j-tmp) \\+ dp[i][tmp][3] * PDF(j-tmp) \\ + dp[i][tmp][4] * PDF(j-tmp)$$</p>\n<p>$$ dp[i][j][1] &#x3D; dp[i-1][tmp][0] <em>\\frac{3}{8}</em> PDF(j-tmp)$$</p>\n<p>$$ dp[i][j][2] &#x3D; dp[i][tmp][0] <em>\\frac{1}{4}</em> PDF(j-tmp)$$</p>\n<p>$$ dp[i][j][3] &#x3D; dp[i-1][tmp][1] * ( \\frac{3}{8}) * PDF(j-tmp) \\ + dp[i-1][tmp][2] * \\frac{1}{2} * PDF(j-tmp)$$</p>\n<p>$$ dp[i][j][4] &#x3D; dp[i][tmp][1] * \\frac{1}{4} * PDF(j-tmp)$$</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">n5_cnt&#x3D;1;#要抽出多少次N\nn5_tries&#x3D; 106;#准备的祈愿次数\ntmp &#x3D; 0;\ndp_p &#x3D; np.zeros((13, 510*n5_cnt + 80,5), dtype&#x3D;float);\ndp_p[0][0][0] &#x3D; 1\nfor i in range (0,n5_cnt+1):\n        for j in range (0,n5_tries + n5_cnt + 1):\n            for k in range (1,81):\n                dp_p[i][j+k][0] +&#x3D; dp_p[i][j][0] * pdf_5[k-1] * 0.375\\\n                                + dp_p[i][j][1] * 0.375 * pdf_5[k-1] \\\n                                + dp_p[i][j][2] * 0.5 * pdf_5[k-1]\\\n                                + dp_p[i][j][3] * pdf_5[k-1]\\\n                                + dp_p[i][j][4] * pdf_5[k-1];\n                dp_p[i][j+k][1] +&#x3D; dp_p[i-1][j][0] * 0.375 * pdf_5[k-1];\n                dp_p[i][j+k][2] +&#x3D; dp_p[i][j][0] * 0.25 * pdf_5[k-1];\n                dp_p[i][j+k][3] +&#x3D; dp_p[i-1][j][1] * 0.375 * pdf_5[k-1]\\\n                                + dp_p[i-1][j][2] * 0.5 * pdf_5[k-1];\n                dp_p[i][j+k][4] +&#x3D; dp_p[i][j][1] * 0.25 * pdf_5[k-1]\nposs&#x3D;[]\nfor i in range(0,n5_tries):\n    tmp &#x3D; tmp + dp_p[n5_cnt][i][1] + dp_p[n5_cnt][i][3]\n    poss.append(tmp)\nprint(tmp)\n#DEMO:0.5007747697175682</code></pre>\n\n<p>图表</p>\n<p>​    <img src=\"http://img.070077.xyz/%E5%8E%9F%E7%A5%9E%E6%AD%A6%E5%99%A8n%E6%8A%BD%E5%8D%A1%E6%A6%82%E7%8E%87%E5%88%86%E5%B8%83%E5%9B%BE.png\" alt=\"原神武器n抽卡概率分布图\"></p>\n<h3 id=\"获取五星武器M、N的祈愿次数分析（To-Be-Updated…\"><a href=\"#获取五星武器M、N的祈愿次数分析（To-Be-Updated…\" class=\"headerlink\" title=\"获取五星武器M、N的祈愿次数分析（To Be Updated…)\"></a>获取五星武器M、N的祈愿次数分析（To Be Updated…)</h3><p>问题：我定轨了M，但M、N都想要。</p>\n<p>我可能比较蠢：四维动态规划？</p>\n<p>定义$dp[h][i][j][k]$为第j次祈愿时第i次获得五星武器N，第h获得五星武器M，祈愿后k：……（同上）</p>\n<p>呃，我们先不考虑土豪了哈，我们只考虑都只获得1次的情况，只需要把<code>tmp = tmp + dp_p[n5_cnt][i][1] + dp_p[n5_cnt][i][3]</code> 再加一项 <code>dp_p[n5_cnt][i][0]</code> ？</p>\n<p>我也希望这能成功，但是这么直接地不可行，因为前面那两项的概率本身就包含了上一次抽到M的情况，再加会导致重复计算，我没想到别的方式改良之。</p>\n<p>另一种思路是分类讨论了，分为先获得M后获得N、先获得N再获得M两种情况。</p>\n<p>再者就是还是含泪：</p>\n<ul>\n<li>需要做出一定的修改，使状态转移时，不忽略h的出现次数。</li>\n</ul>\n<p>$$ dp[h][i][j][0] &#x3D; dp[h-1][i][tmp][0] * \\frac{3}{8} *PDF(j-tmp) \\ + dp[h-1][i][tmp][1] * \\frac{3}{8} * PDF(j-tmp) \\+ dp[h-1][i][tmp][2] * \\frac{1}{2}*PDF(j-tmp) \\+ dp[h-1][i][tmp][3] * PDF(j-tmp) \\ + dp[h-1][i][tmp][4] * PDF(j-tmp)$$</p>\n<p>$$ dp[h][i][j][1] &#x3D; dp[h][i-1][tmp][0] <em>\\frac{3}{8}</em> PDF(j-tmp)$$</p>\n<p>$$ dp[h][i][j][2] &#x3D; dp[h][i][tmp][0] <em>\\frac{1}{4}</em> PDF(j-tmp)$$</p>\n<p>$$ dp[h][i][j][3] &#x3D; dp[h][i-1][tmp][1] * ( \\frac{3}{8}) * PDF(j-tmp) \\ + dp[h][i-1][tmp][2] * \\frac{1}{2} * PDF(j-tmp)$$</p>\n<p>$$ dp[h][i][j][4] &#x3D; dp[h][i][tmp][1] * \\frac{1}{4} * PDF(j-tmp)$$</p>\n<p>事实证明上面的方法不一定获得了正确答案。这个错误是没有价值的吗，不，他可能会给一个同样想研究这一问题的人一个参考。于是提出下面的形式：</p>\n<p>定义$dp[i][j][k]$为第j次祈愿时，i - 获得的目标种类数 , 祈愿后k同上。</p>\n<p>其实关键原因和上面的“加一项”一样，就是因为最后获取概率时，需要涵盖多个状态。以前的动态规划获取概率时，获取的状态间互相不存在依赖，而这次获取概率时，各个状态内部的转移存在相关。</p>\n<p>最近灵感较为枯竭，先赶别的ddl了。在此附上可能是错误的代码（若考虑较大次数，可能需修改码参数&#x2F;概率不准确）和运行结果：</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">n5_cnt_M&#x3D;1;#要抽出多少次M,N\nn5_cnt_N&#x3D;1;\nn5_cnt&#x3D;n5_cnt_M + n5_cnt_N;\nn5_tries&#x3D; 180*n5_cnt;#准备的祈愿次数\ntmp &#x3D; 0;\ndp_p &#x3D; np.zeros((13,13, 310*n5_cnt + 80,5), dtype&#x3D;float);\ndp_p[0][0][0][0] &#x3D; 1\n\nh &#x3D; 0;\nfor h in range (0,3*n5_cnt_M +1):\n    for i in range(0,3*n5_cnt_N+1):\n        for j in range (0,n5_tries + n5_cnt + 1):\n            for k in range (1,81):\n                    dp_p[h][i][j+k][0] +&#x3D; dp_p[h-1][i][j][0] * pdf_5[k-1] * 0.375\\\n                                + dp_p[h-1][i][j][1] * 0.375 * pdf_5[k-1] \\\n                                + dp_p[h-1][i][j][2] * 0.5 * pdf_5[k-1]\\\n                                + dp_p[h-1][i][j][3] * pdf_5[k-1]\\\n                                + dp_p[h-1][i][j][4] * pdf_5[k-1];\n                    dp_p[h][i][j+k][1] +&#x3D; dp_p[h][i-1][j][0] * 0.375 * pdf_5[k-1];\n                    dp_p[h][i][j+k][2] +&#x3D; dp_p[h][i][j][0] * 0.25 * pdf_5[k-1];\n                    dp_p[h][i][j+k][3] +&#x3D; dp_p[h][i-1][j][1] * 0.375 * pdf_5[k-1]\\\n                                + dp_p[h][i-1][j][2] * 0.5 * pdf_5[k-1];\n                    dp_p[h][i][j+k][4] +&#x3D; dp_p[h][i][j][1] * 0.25 * pdf_5[k-1]\n\nposs&#x3D;[]\nfor i in range(0,n5_tries):\n    for i1 in range (n5_cnt_M,3*n5_cnt_M+1):\n        tmp +&#x3D; dp_p[i1][n5_cnt_N][i][1] + dp_p[i1][n5_cnt_N][i][3]\n    for i2 in range(n5_cnt_N,3*n5_cnt_N+1):\n        tmp +&#x3D; dp_p[n5_cnt_M][i2][i][0];\n    poss.append(tmp)\nprint(tmp)\n#制图代码，直接cv用\nx_major_locator&#x3D;MultipleLocator(20)#x分度值设置\ny_major_locator&#x3D;MultipleLocator(0.1)\nax&#x3D;plt.gca()\nax.xaxis.set_major_locator(x_major_locator)\nax.yaxis.set_major_locator(y_major_locator)\nplt.grid()  # 生成网格\nplt.plot(poss)</code></pre>\n\n<p><img src=\"http://img.070077.xyz/%E5%8E%9F%E7%A5%9E%E6%AD%A6%E5%99%A8m%E4%B8%94n%E6%8A%BD%E5%8D%A1%E6%A6%82%E7%8E%87%E5%88%86%E5%B8%83%E5%9B%BE.png\" alt=\"原神武器m且n抽卡概率分布图\"></p>\n<p>拓展问题：我先定轨了M，获取M后定轨N（命定值清零），参考上面两个问题叠加应该可以。</p>\n<h3 id=\"四星武器的分析\"><a href=\"#四星武器的分析\" class=\"headerlink\" title=\"四星武器的分析\"></a>四星武器的分析</h3><p>和上面四星角色祈愿分析思想一致。</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">#偷懒：p_5的内容实际是p_4\nn5_cnt&#x3D;1#要抽出多少次F\nn5_tries&#x3D;130 * n5_cnt;#准备的祈愿次数\ntmp &#x3D; 0;\ndp_p &#x3D; np.zeros((13, 150*n5_cnt + 20,3), dtype&#x3D;float);\ndp_p[0][0][0] &#x3D; 1\n# 0 - F 1 - UP &amp; !F 2- !UP\nfor i in range (0,n5_cnt+1):\n        for j in range (0,n5_tries):\n            for k in range (1,11):\n                if(i-1&gt;&#x3D;0):\n                    dp_p[i][j+k][0] +&#x3D; dp_p[i-1][j][2] * pdf_5[k-1] * 1&#x2F;5\\\n                                    + dp_p[i-1][j][1] * pdf_5[k-1] * 3&#x2F;20 + dp_p[i-1][j][0] * 3&#x2F;20 * pdf_5[k-1];\n                dp_p[i][j+k][1] +&#x3D; dp_p[i][j][0] * 3&#x2F;5 * pdf_5[k-1] + dp_p[i][j][2] * 4&#x2F;5 * pdf_5[k-1]\\\n                                + dp_p[i][j][1] * 3&#x2F;5 * pdf_5[k-1];\n                dp_p[i][j+k][2] +&#x3D; dp_p[i][j][0] * 1&#x2F;4 * pdf_5[k-1] + dp_p[i][j][1] * 1&#x2F;4 * pdf_5[k-1];\nposs&#x3D;[]\nfor i in range(0,n5_tries):\n    tmp &#x3D; tmp + dp_p[n5_cnt][i][0]\n    poss.append(tmp)\nprint(tmp)\n#制图代码，直接cv用\nx_major_locator&#x3D;MultipleLocator(10)#x分度值设置\ny_major_locator&#x3D;MultipleLocator(0.1)\nax&#x3D;plt.gca()\nax.xaxis.set_major_locator(x_major_locator)\nax.yaxis.set_major_locator(y_major_locator)\nx_values &#x3D; [x for x in range(1, n5_tries)]\nplt.grid()  # 生成网格\nplt.plot(poss)  </code></pre>\n\n<p><img src=\"http://img.070077.xyz/%E5%8E%9F%E7%A5%9E%E5%9B%9B%E6%98%9F%E6%AD%A6%E5%99%A8f%E6%8A%BD%E5%8D%A1%E6%A6%82%E7%8E%87%E5%88%86%E5%B8%83%E5%9B%BE.png\" alt=\"原神四星武器f抽卡概率分布图\"></p>\n<h2 id=\"无定轨机制下武器祈愿分析\"><a href=\"#无定轨机制下武器祈愿分析\" class=\"headerlink\" title=\"无定轨机制下武器祈愿分析\"></a>无定轨机制下武器祈愿分析</h2><p>和上面四星角色祈愿分析思想一致。<img src=\"http://img.070077.xyz/%E5%8E%9F%E7%A5%9E%E6%AD%A6%E5%99%A8m%E4%B8%8D%E5%AE%9A%E8%BD%A8%E6%8A%BD%E5%8D%A1%E6%A6%82%E7%8E%87%E5%88%86%E5%B8%83%E5%9B%BE.png\" alt=\"原神武器m不定轨抽卡概率分布图\"></p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">#这次下面是真的武器池概率分布p_5了哈\nn5_cnt&#x3D;1#要抽出多少次M\nn5_tries&#x3D;240 * n5_cnt;#准备的祈愿次数\ntmp &#x3D; 0;\ndp_p &#x3D; np.zeros((13, 320*n5_cnt + 20,3), dtype&#x3D;float);\ndp_p[0][0][0] &#x3D; 1\n# 0 - M 1 - UP &amp; !M 2- !UP\nfor i in range (0,n5_cnt+1):\n        for j in range (0,n5_tries):\n            for k in range (1,81):\n                if(i-1&gt;&#x3D;0):\n                    dp_p[i][j+k][0] +&#x3D; dp_p[i-1][j][2] * pdf_5[k-1] * 1&#x2F;2 \\\n                                    + dp_p[i-1][j][1] * pdf_5[k-1] * 3&#x2F;8 + dp_p[i-1][j][0] * 3&#x2F;8 * pdf_5[k-1];\n                dp_p[i][j+k][1] +&#x3D; dp_p[i][j][0] * 3&#x2F;8 * pdf_5[k-1] + dp_p[i][j][2] * 1&#x2F;2 * pdf_5[k-1]\\\n                                + dp_p[i][j][1] * 3&#x2F;8 * pdf_5[k-1];\n                dp_p[i][j+k][2] +&#x3D; dp_p[i][j][0] * 1&#x2F;4 * pdf_5[k-1] + dp_p[i][j][1] * 1&#x2F;4 * pdf_5[k-1];\nposs&#x3D;[]\nfor i in range(0,n5_tries):\n    tmp &#x3D; tmp + dp_p[n5_cnt][i][0]\n    poss.append(tmp)\nprint(tmp)\n#制图代码，直接cv用\nx_major_locator&#x3D;MultipleLocator(15)#x分度值设置\ny_major_locator&#x3D;MultipleLocator(0.1)\nax&#x3D;plt.gca()\nax.xaxis.set_major_locator(x_major_locator)\nax.yaxis.set_major_locator(y_major_locator)\nx_values &#x3D; [x for x in range(1, n5_tries)]\nplt.grid()  # 生成网格\nplt.plot(poss)  </code></pre>\n\n<p>你如果和上面定轨时比较，会发现你想要M的话，需要投入稍微更多的抽数。而且可以看见，当投入200抽时，定轨机制下的获取M的概率已经逐步收敛至1。而不定轨机制下，获取到的概率的概率仅在80%附近，且之后收敛较慢，极端情况的发生概率并不低。</p>\n<p>有关不定轨又同时想要M和N的，TBC…</p>\n<h1 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h1><p>概率分析还可以分析：如何配置属性让伤害最大化等问题。概率论作为一种打破人的直觉的东西，实在是让人又爱又恨。本文不仅仅局限于传统的期望范畴，结合具体概率的分布分析了对应的抽数需求。由于祈愿机制的概率不是恒定的，期望与中分位点存在区别，可以用平均GDP和中位数来感受。</p>\n<p>致谢：感谢张老师的帮助和OneBST的分享。</p>\n<p>【To Be Continued】</p>\n<ul>\n<li><p>同时研究多个四星的祈愿次数</p>\n</li>\n<li><p>常驻祈愿结合“联动规则”的分析</p>\n</li>\n<li><p>常驻祈愿与UP祈愿结合分析</p>\n</li>\n<li><p>蒙特卡罗模拟与大数定律</p>\n</li>\n<li><p>通过置信度研究极端情况</p>\n</li>\n</ul>\n","feature":true,"text":"#《原神》祈愿机制概率研究 【摘要】本文以概率论、随机过程理论等工具研究游戏《原神》中的祈愿机制，主要基于动态规划，以“期望”和“概率的概率”两大分析方向进行数据处理，并根据分析结果总结了一些方便玩家规划金钱与资源的建议。由于追求多次获得五星道具的玩家基本“不差钱”，本文附有获取...","link":"","photos":[],"count_time":{"symbolsCount":"23k","symbolsTime":"21 mins."},"categories":[],"tags":[],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%A7%84%E5%88%99%E8%A1%A8%E8%BF%B0\"><span class=\"toc-text\">规则表述</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%A7%92%E8%89%B2%E7%A5%88%E6%84%BF\"><span class=\"toc-text\">角色祈愿</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%AD%A6%E5%99%A8%E7%A5%88%E6%84%BF\"><span class=\"toc-text\">武器祈愿</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E8%A7%92%E8%89%B2%E7%A5%88%E6%84%BF%E5%88%86%E6%9E%90\"><span class=\"toc-text\">角色祈愿分析</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BA%94%E6%98%9F%E8%A7%92%E8%89%B2%E6%A6%82%E7%8E%87%E5%BB%BA%E6%A8%A1\"><span class=\"toc-text\">五星角色概率建模</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%B0%9D%E8%AF%951%EF%BC%9A89%E6%AC%A1%E4%BC%AF%E5%8A%AA%E5%88%A9%E5%AE%9E%E9%AA%8C\"><span class=\"toc-text\">尝试1：89次伯努利实验</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%B0%9D%E8%AF%952%EF%BC%9A%E6%A6%82%E7%8E%87%E9%80%92%E5%A2%9E%E7%9A%84%E4%BF%9D%E5%BA%95%E6%9C%BA%E5%88%B6\"><span class=\"toc-text\">尝试2：概率递增的保底机制</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%A6%82%E7%8E%87%E9%80%92%E5%A2%9E%E4%BF%9D%E5%BA%95%E6%9C%BA%E5%88%B6%E4%B8%8B%E7%9A%84%E6%95%B0%E5%AD%97%E7%89%B9%E5%BE%81\"><span class=\"toc-text\">概率递增保底机制下的数字特征</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%B1%82%E6%95%B0%E6%8D%AE%E7%89%B9%E5%BE%81\"><span class=\"toc-text\">求数据特征</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%94%B1%E6%9C%9F%E6%9C%9B%E7%89%B9%E5%BE%81%E8%BF%9B%E8%A1%8C%E8%B5%84%E6%BA%90%E8%A7%84%E5%88%92\"><span class=\"toc-text\">由期望特征进行资源规划</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E8%8E%B7%E5%BE%97%E4%BA%94%E6%98%9F%E8%A7%92%E8%89%B2A%E7%9A%84%E6%9C%9F%E6%9C%9B%E6%AC%A1%E6%95%B0%E5%88%86%E6%9E%90\"><span class=\"toc-text\">获得五星角色A的期望次数分析</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E8%8E%B7%E5%BE%976%E5%91%BD%E5%BA%A7A%E8%A7%92%E8%89%B2%E7%9A%84%E6%9C%9F%E6%9C%9B%E6%AC%A1%E6%95%B0%E5%88%86%E6%9E%90\"><span class=\"toc-text\">获得6命座A角色的期望次数分析</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E8%8E%B7%E5%BE%97%E5%9B%9B%E6%98%9F%E8%A7%92%E8%89%B2B%E7%9A%84%E6%9C%9F%E6%9C%9B%E6%AC%A1%E6%95%B0%E5%88%86%E6%9E%90\"><span class=\"toc-text\">获得四星角色B的期望次数分析</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%94%B1%E5%88%86%E4%BD%8D%E7%82%B9%E7%89%B9%E5%BE%81%E8%BF%9B%E8%A1%8C%E5%88%86%E6%9E%90\"><span class=\"toc-text\">由分位点特征进行分析</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E8%8E%B7%E5%BE%97%E5%A4%9A%E6%AC%A1%E4%BA%94%E6%98%9F%E8%A7%92%E8%89%B2%E7%9A%84%E5%88%86%E4%BD%8D%E7%82%B9%E5%88%86%E6%9E%90\"><span class=\"toc-text\">获得多次五星角色的分位点分析</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%8F%8C%E8%A7%92%E8%89%B2%E6%B1%A0%E7%A5%88%E6%84%BF\"><span class=\"toc-text\">双角色池祈愿</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BF%9D%E5%BA%95%E4%BE%9D%E8%B5%96%E4%B8%8B%E7%9A%84%E5%88%86%E4%BD%8D%E7%82%B9%E5%88%86%E6%9E%90\"><span class=\"toc-text\">保底依赖下的分位点分析</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%B0%9D%E8%AF%951%EF%BC%9A%E5%B0%86%E2%80%9C%E4%BF%9D%E5%BA%95%E8%8E%B7%E5%BE%97%E7%9A%84%E4%BA%94%E6%98%9F%E2%80%9D%E5%92%8C%E2%80%9C%E7%A5%88%E6%84%BF%E6%AC%A1%E6%95%B0%E2%80%9D%E6%8B%86%E6%88%90%E4%B8%A4%E4%B8%AA%E7%8B%AC%E7%AB%8B%E4%BA%8B%E4%BB%B6\"><span class=\"toc-text\">尝试1：将“保底获得的五星”和“祈愿次数”拆成两个独立事件</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E4%BF%9D%E5%BA%95%E4%B9%8B%E9%97%B4%E7%9A%84%E9%A9%AC%E5%B0%94%E5%8F%AF%E5%A4%AB%E8%BF%87%E7%A8%8B\"><span class=\"toc-text\">保底之间的马尔可夫过程</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%88%86%E7%B1%BB%E8%AE%A8%E8%AE%BA%E7%9A%84%E6%96%B9%E5%BC%8F%E6%B1%82%E5%8F%96%E6%A6%82%E7%8E%87\"><span class=\"toc-text\">分类讨论的方式求取概率</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%B0%9D%E8%AF%952%EF%BC%9A%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E7%9A%84%E8%A7%92%E5%BA%A6\"><span class=\"toc-text\">尝试2：动态规划的角度</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%8A%BD%E5%88%B0%E5%A4%9A%E4%B8%AA%E4%BA%94%E6%98%9F%E8%A7%92%E8%89%B2%E4%B8%ADUP%E4%BA%94%E6%98%9F%E8%A7%92%E8%89%B2%E7%9A%84%E4%B8%AA%E6%95%B0%E6%A6%82%E7%8E%87\"><span class=\"toc-text\">抽到多个五星角色中UP五星角色的个数概率</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%B1%82%E5%8F%96%E5%91%BD%E5%BA%A7-%E7%A5%88%E6%84%BF%E6%AC%A1%E6%95%B0%E6%A6%82%E7%8E%87\"><span class=\"toc-text\">求取命座-祈愿次数概率</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E9%9D%9E%E9%BB%98%E8%AE%A4%E7%8A%B6%E6%80%81%E5%BC%80%E5%A7%8B%E7%9A%84%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%EF%BC%88To-Be-Continued%E2%80%A6%EF%BC%89\"><span class=\"toc-text\">非默认状态开始的动态规划（To Be Continued…）</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%9B%9B%E6%98%9F%E8%A7%92%E8%89%B2%E7%A5%88%E6%84%BF%E5%88%86%E6%9E%90\"><span class=\"toc-text\">四星角色祈愿分析</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%A6%82%E8%A7%88\"><span class=\"toc-text\">概览</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%AE%97%E6%B3%95\"><span class=\"toc-text\">算法</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%8D%E5%90%8C%E6%A8%A1%E5%9E%8B%E5%AF%B9%E6%AF%94%E7%A0%94%E7%A9%B6\"><span class=\"toc-text\">不同模型对比研究</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%8E%E6%97%A0%E4%BF%9D%E5%BA%95%E6%9C%BA%E5%88%B6%EF%BC%88%E5%9D%87%E5%8C%801-6-%EF%BC%89%E7%9A%84%E5%AF%B9%E6%AF%94\"><span class=\"toc-text\">与无保底机制（均匀1.6%）的对比</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%8E%E4%BF%9D%E5%BA%95%E5%89%8D%E5%9D%87%E5%8C%80%E6%9C%BA%E5%88%B6%EF%BC%88%E9%AD%94%E6%94%B9%E5%B0%9D%E8%AF%951%EF%BC%89%E7%9A%84%E5%AF%B9%E6%AF%94\"><span class=\"toc-text\">与保底前均匀机制（魔改尝试1）的对比</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E6%AD%A6%E5%99%A8%E7%A5%88%E6%84%BF%E5%88%86%E6%9E%90\"><span class=\"toc-text\">武器祈愿分析</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%A6%82%E7%8E%87%E9%80%92%E5%A2%9E%E4%BF%9D%E5%BA%95%E6%9C%BA%E5%88%B6%E5%8F%8A%E6%95%B0%E5%AD%97%E7%89%B9%E5%BE%81\"><span class=\"toc-text\">概率递增保底机制及数字特征</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%AE%9A%E8%BD%A8%E6%9C%BA%E5%88%B6%E4%B8%8B%E7%9A%84%E8%B5%84%E6%BA%90%E8%A7%84%E5%88%92%EF%BC%88%E5%81%87%E8%AE%BE%E5%AE%9A%E8%BD%A8M%EF%BC%89\"><span class=\"toc-text\">定轨机制下的资源规划（假设定轨M）</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%8E%B7%E5%8F%96%E4%BA%94%E6%98%9F%E6%AD%A6%E5%99%A8M%E7%9A%84%E7%A5%88%E6%84%BF%E6%AC%A1%E6%95%B0%E5%88%86%E6%9E%90\"><span class=\"toc-text\">获取五星武器M的祈愿次数分析</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%8E%B7%E5%8F%96%E4%BA%94%E6%98%9F%E6%AD%A6%E5%99%A8N%E7%9A%84%E7%A5%88%E6%84%BF%E6%AC%A1%E6%95%B0%E5%88%86%E6%9E%90\"><span class=\"toc-text\">获取五星武器N的祈愿次数分析</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%8E%B7%E5%8F%96%E4%BA%94%E6%98%9F%E6%AD%A6%E5%99%A8M%E3%80%81N%E7%9A%84%E7%A5%88%E6%84%BF%E6%AC%A1%E6%95%B0%E5%88%86%E6%9E%90%EF%BC%88To-Be-Updated%E2%80%A6\"><span class=\"toc-text\">获取五星武器M、N的祈愿次数分析（To Be Updated…)</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%9B%9B%E6%98%9F%E6%AD%A6%E5%99%A8%E7%9A%84%E5%88%86%E6%9E%90\"><span class=\"toc-text\">四星武器的分析</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%97%A0%E5%AE%9A%E8%BD%A8%E6%9C%BA%E5%88%B6%E4%B8%8B%E6%AD%A6%E5%99%A8%E7%A5%88%E6%84%BF%E5%88%86%E6%9E%90\"><span class=\"toc-text\">无定轨机制下武器祈愿分析</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E6%80%BB%E7%BB%93\"><span class=\"toc-text\">总结</span></a>","author":{"name":"Liul","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{},"next_post":{"title":"C/C++ 多维数组的处理","uid":"f4b1f6c62c51b83cc4ba3ecdcd8b9c52","slug":"C中多维数组的处理","date":"2021-09-19T13:17:35.450Z","updated":"2021-11-29T15:08:17.177Z","comments":true,"path":"api/articles/C中多维数组的处理.json","keywords":null,"cover":null,"text":"笔者要用到多维数组的时候经常忘了多维数组怎么用，在此总结一下： 【内容产出中】 1.二维数组的函数调用实例 &#x2F;&#x2F;声明 void bubbleSort(float (*num)[40],int size); &#x2F;&#x2F;调用 bubbleSort( ...","link":"","photos":[],"count_time":{"symbolsCount":609,"symbolsTime":"1 mins."},"categories":[],"tags":[],"author":{"name":"Liul","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true}}